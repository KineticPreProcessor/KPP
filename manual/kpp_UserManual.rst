.. _`sec:bnf`:

###################################
BNF Description of the KPP Language
###################################

Following is the BNF-like specification of the language:

+-------------------+------------------------------------+-----------+
| *program* ::=     | *module* :math:`|` *module*        |           |
|                   | *program*                          |           |
+-------------------+------------------------------------+-----------+
| *module* ::=      | *section* :math:`|` *command*      |           |
|                   | :math:`|` *inline_code*            |           |
+-------------------+------------------------------------+-----------+
| *section* ::=     | *atom_definition_list*             | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *atom_list*                        | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *species_definition_list*          | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *species_definition_list*          | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *equation_list*                    | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *initvalues_list*                  | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *species_list* *atom_list*         | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *lump_list*                        | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *species_list* *atom_list*         | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *species_list_plus*                | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *species_list_plus*                | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *species_list*                     |           |
+-------------------+------------------------------------+-----------+
| *command* ::=     |                                    | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ SYMBOL | VALUE ]``             | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *driver_name*                      | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ AGGREGATE | SPLIT ]``          | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *file_name*                        | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *integrator_name*                  | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *integrator_name*                  | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ OFF | FUL                      | :math:`|` |
|                   | L | SPARSE_LU_ROW | SPARSE_ROW ]`` |           |
+-------------------+------------------------------------+-----------+
|                   | ``[ Fort                           | :math:`|` |
|                   | ran90 | Fortran77 | C | Matlab ]`` |           |
+-------------------+------------------------------------+-----------+
|                   |                                    | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *minimum_version_number*           | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | *model_name*                       | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   |                                    | :math:`|` |
+-------------------+------------------------------------+-----------+
|                   | ``[ ON | OFF ]``                   |           |
+-------------------+------------------------------------+-----------+
| *inline_code* ::= | *inline_type*                      |           |
+-------------------+------------------------------------+-----------+
|                   | *inline_code*                      |           |
+-------------------+------------------------------------+-----------+
|                   |                                    |           |
+-------------------+------------------------------------+-----------+

+---------------------------+---------------------------+-----------+
| *atom_count* ::=          | *integer* *atom_name*     | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *atom_name*               |           |
+---------------------------+---------------------------+-----------+
| *atom_definition_list*    | *atom_definition*         | :math:`|` |
| ::=                       |                           |           |
+---------------------------+---------------------------+-----------+
|                           | *atom_definition*         |           |
|                           | *atom_definition_list*    |           |
+---------------------------+---------------------------+-----------+
| *atom_list* ::=           | *atom_name*;              | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *atom_name*; *atom_list*  |           |
+---------------------------+---------------------------+-----------+
| *equation* ::=            | :math:`<`\                | :math:`|` |
|                           | *equation_tag*\ :math:`>` |           |
|                           | *expression* =            |           |
|                           | *expression* : *rate*;    |           |
+---------------------------+---------------------------+-----------+
|                           | *expression* =            |           |
|                           | *expression* : *rate*;    |           |
+---------------------------+---------------------------+-----------+
| *equation_list* ::=       | *equation*                | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *equation*                |           |
|                           | *equation_list*           |           |
+---------------------------+---------------------------+-----------+
| *equation_tag* ::=        | Alphanumeric expression,  |           |
|                           | also including the        |           |
|                           | underscore.               |           |
+---------------------------+---------------------------+-----------+
|                           | In , it is defined as .   |           |
+---------------------------+---------------------------+-----------+
| *expression* ::=          | *term*                    | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *term* :math:`+`          | :math:`|` |
|                           | *expression*              |           |
+---------------------------+---------------------------+-----------+
|                           | *term* :math:`-`          |           |
|                           | *expression*              |           |
+---------------------------+---------------------------+-----------+
| *initvalues_assignment*   | *species_name_plus* =     | :math:`|` |
| ::=                       | *program_expression*;     |           |
+---------------------------+---------------------------+-----------+
|                           | = *program_expression*;   |           |
+---------------------------+---------------------------+-----------+
| *initvalues_list* ::=     | *initvalues_assignment*   | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *initvalues_assignment*   |           |
|                           | *initvalues_list*         |           |
+---------------------------+---------------------------+-----------+
| *inline_type* ::=         | :math:`|` :math:`|`       | :math:`|` |
|                           | :math:`|` :math:`|`       |           |
|                           | :math:`|`                 |           |
+---------------------------+---------------------------+-----------+
|                           | :math:`|` :math:`|`       | :math:`|` |
|                           | :math:`|` :math:`|`       |           |
|                           | :math:`|`                 |           |
+---------------------------+---------------------------+-----------+
|                           | :math:`|` :math:`|`       | :math:`|` |
|                           | :math:`|` :math:`|`       |           |
|                           | :math:`|`                 |           |
+---------------------------+---------------------------+-----------+
|                           | :math:`|` :math:`|`       | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | :math:`|` :math:`|`       |           |
+---------------------------+---------------------------+-----------+
| *lump* ::=                | *lump_sum* :              |           |
|                           | *species_name*;           |           |
+---------------------------+---------------------------+-----------+
| *lump_list* ::=           | *lump*                    | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *lump* *lump_list*        |           |
+---------------------------+---------------------------+-----------+
| *lump_sum* ::=            | *species_name*            | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *species_name* :math:`+`  |           |
|                           | *lump_sum*                |           |
+---------------------------+---------------------------+-----------+
| *rate* ::=                | *number*                  | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *program_expression*      |           |
+---------------------------+---------------------------+-----------+
| *species_composition* ::= | *atom_count*              | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *atom_count* :math:`+`    | :math:`|` |
|                           | *species_composition*     |           |
+---------------------------+---------------------------+-----------+
|                           |                           |           |
+---------------------------+---------------------------+-----------+
| *species_definition* ::=  | *species_name* =          |           |
|                           | *species_composition*;    |           |
+---------------------------+---------------------------+-----------+
| *species_definition_list* | *species_definition*      | :math:`|` |
| ::=                       |                           |           |
+---------------------------+---------------------------+-----------+
|                           | *species_definition*      |           |
|                           | *species_definition_list* |           |
+---------------------------+---------------------------+-----------+
| *species_list* ::=        | *species_name*;           | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *species_name*;           |           |
|                           | *species_list*            |           |
+---------------------------+---------------------------+-----------+
| *species_list_plus* ::=   | *species_name_plus*;      | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *species_name_plus*;      |           |
|                           | *species_list_plus*       |           |
+---------------------------+---------------------------+-----------+
| *species_name* ::=        | Alphanumeric expression,  |           |
|                           | also including the        |           |
|                           | underscore, starting with |           |
|                           | a letter.                 |           |
+---------------------------+---------------------------+-----------+
|                           | In , it is defined as .   |           |
|                           | Its maximum length is 15. |           |
+---------------------------+---------------------------+-----------+
| *species_name_plus* ::=   | *species_name*            | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           |                           | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           |                           | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           |                           |           |
+---------------------------+---------------------------+-----------+
| *term* ::=                | *number* *species_name*   | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           | *species_name*            | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           |                           | :math:`|` |
+---------------------------+---------------------------+-----------+
|                           |                           |           |
+---------------------------+---------------------------+-----------+

.. |image| image:: Figures/kpp-logo.pdf
   :width: 70.0%
