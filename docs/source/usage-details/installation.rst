.. _Installation:

############################
Installing KPP-for-GEOS-Chem
############################

Once you have made sure that your system meets all the :ref:`System
Requirements`, you may download and install :program:`KPP-for-GEOS-Chem`.

-----------
Downloading
-----------

The following sections describe how to download :program:`KPP-for-GEOS-Chem` with Git.  The version of :program:`KPP-for-GEOS-Chem` that you will need to use depends on the GEOS-Chem version that you have.

.. important:: Do not download the :program:`KPP-for-GEOS-Chem` source
	       code into your :program:`GEOS-Chem` source code
	       directory! This will avoid confusion with the KPP
	       folder within :program:`GEOS-Chem`.  This folder
	       contains Fortran-90 source code files that are generated by :program:`KPP-for-GEOS-Chem`.

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KPP-for-GEOS-Chem 2.3.2_gc -- currently experimental
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The current version of :program:`KPP-for-GEOS-Chem 2.3.2_gc` is for
use with ongoing GEOS-Chem development. It should not yet be used with
any released GEOS-Chem versions.

To download this version, type at the command line:

.. code-block:: console

   $ git clone -b GC_updates https://github.com/geoschem/KPP.git

You may now proceed to our :ref:`Compiling <comp>` section below

.. _kpp231:

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KPP-for-GEOS-Chem 2.3.1.gc -- for GEOS-Chem 13.1.0 and later
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

If you will be working with GEOS-Chem 13.1.0 and later, then you will
need to download :program:`KPP-for-GEOS-Chem 2.3.1_gc`.  Type at the
command line:

.. code-block:: console

   $ git clone -b 2.3.1_gc https://github.com/geoschem/KPP.git
   $ git -C KPP branch 2.3.1_gc

You may now proceed to our :ref:`Compiling <comp>` section below.

.. _kpp225:

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KPP-for-GEOS-Chem 2.2.5_gc -- for GEOS-Chem 13.0.2 and earlier
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

If you will be working with GEOS-Chem versions older than 13.1.0, then
you will need to download :program:`KPP-for-GEOS-Chem 2.2.5_gc`.  Use
the following commands:

.. code-block:: console

   $ git clone -b 2.2.5_gc https://github.com/geoschem/KPP.git
   $ git -C KPP branch 2.2.5_gc

.. _comp:

---------
Compiling
---------

Build the KPP-for-GEOS-Chem executable file with these commands:

.. code-block:: console

   $ cd KPP/kpp-code
   $ make distclean
   $ make all

If the build completes successfully, you will see the executable file :file:`KPP/kpp-code/bin/kpp`.

----------------
Setting the path
----------------

Once have built :program:`KPP-for-GEOS-Chem`, you must add the path to the
executable file to your :envvar:`PATH` environment variable.

If you use the bash Unix shell, add these lines to your
:file:`~/.bash_aliases` file.  If you don't have a
:file:`~/.bash_aliases` file, you can add these lines to your
:file:`~/.bashrc` file instead.)

.. code-block:: none

   export PATH=$PATH:/PATH_TO_KPP/KPP/kpp-code/bin/
   export KPP_HOME=PATH_TO_KPP/KPP/kpp-code`

If you use the csh or tcsh Unix shell, add these lines to your
:file:`~/.cshrc` file:

.. code-block:: none

   setenv PATH $PATH:/PATH_TO_KPP/KPP/kpp-code/bin/
   setenv KPP_HOME=PATH_TO_KPP/KPP/kpp-code

.. note::

  - For example, if you installed FlexChem-KPP into your home
    directory, then  :code:`PATH_TO_KPP` would be :file:`~/KPP`, etc.
